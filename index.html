<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Viabilidade de Importa√ß√£o | Fabio Machado</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- SEO b√°sico -->
  <meta name="description"
        content="Calcule rapidamente o custo e a viabilidade da sua Importa√ß√£o Simplificada e Importa√ß√£o Formal Mar√≠tima ou A√©rea, incluindo NCM, impostos, courier e margem de venda. Ferramenta did√°tica criada por Fabio Machado Consultoria Estrat√©gica." />
  <meta name="author" content="Fabio Machado Consultoria Estrat√©gica" />
  <!-- Ajuste a URL abaixo para a URL final do seu GitHub Pages, se quiser -->
  <link rel="canonical" href="https://fabioluismachado01-alt.github.io/calculadora-importacao/" />

  <!-- Open Graph / Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Calculadora de Viabilidade de Importa√ß√£o ‚Äì Fabio Machado" />
  <meta property="og:description"
        content="Simulador gratuito para avaliar custos, tributa√ß√£o e viabilidade da sua Importa√ß√£o Simplificada e Importa√ß√£o Formal Mar√≠tima ou A√©rea, com orienta√ß√£o de quem vive o com√©rcio exterior na pr√°tica." />
  <meta property="og:url" content="https://fabioluismachado01-alt.github.io/calculadora-importacao/" />
  <meta property="og:image" content="https://fabioluismachado01-alt.github.io/calculadora-importacao/logo-fabio.png" />

  <!-- Favicon / √≠cone -->
  <link rel="icon" href="logo-fabio.png" type="image/png" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#020617" id="themeColorMeta" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <style>
    :root {
      --navy: #020617;
      --navy-light: #0f172a;
      --gold: #eab308;
      --gold-light: #facc15;
      --bg: #020617;
      --card-bg: #0b1220;
      --border: #1e293b;
      --text: #e5e7eb;
      --text-muted: #9ca3af;
      --danger: #fca5a5;
      --radius: 14px;
    }

    /* Tema claro sobrescrevendo vari√°veis */
    body[data-theme="light"] {
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --border: #e5e7eb;
      --text: #020617;
      --text-muted: #6b7280;
    }

    * {
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #1e293b 0, var(--bg) 55%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      border-bottom: 1px solid var(--border);
      padding: 10px 18px;
      background: rgba(2, 6, 23, 0.92);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    body[data-theme="light"] header {
      background: rgba(255, 255, 255, 0.9);
    }

    .brand {
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    header h1 {
      font-size: 16px;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 2px;
      font-weight: 600;
    }

    .subtitle {
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 400;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
      text-align: right;
    }

    .insta-link {
      font-size: 12px;
      color: #38bdf8;
      text-decoration: none;
      font-weight: 500;
    }

    .insta-link:hover {
      text-decoration: underline;
    }

    #cotacaoInfo {
      font-size: 12px;
      color: var(--text-muted);
    }

    main {
      max-width: 1000px;
      margin: 24px auto;
      padding: 0 16px 70px;
      width: 100%;
    }

    .card {
      background: linear-gradient(145deg, #111827 0%, #020617 70%);
      border: 1px solid var(--border);
      padding: 20px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.45);
    }

    body[data-theme="light"] .card {
      background: var(--card-bg);
      box-shadow: 0 8px 24px rgba(15,23,42,0.12);
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 18px;
      font-weight: 600;
    }

    .grid {
      display: grid;
      gap: 14px;
    }

    @media (min-width: 640px) {
      .grid-2 {
        grid-template-columns: repeat(2, 1fr);
      }
      .grid-3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    label {
      font-size: 13px;
      margin-bottom: 6px;
      display: block;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px 10px;
      background: #0f172a;
      color: #e5e7eb;
      border: 1px solid #1f2937;
      border-radius: 10px;
      font-size: 14px;
      outline: none;
      transition: border 0.15s, box-shadow 0.15s, background 0.15s, color 0.15s;
    }

    body[data-theme="light"] input,
    body[data-theme="light"] select,
    body[data-theme="light"] textarea {
      background: #f9fafb;
      color: #020617;
      border-color: #e5e7eb;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 1px rgba(234, 179, 8, 0.5);
    }

    textarea {
      resize: vertical;
    }

    button {
      background: linear-gradient(90deg, var(--gold-light), var(--gold));
      color: #0f172a;
      border: none;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.15s;
      box-shadow: 0 8px 20px rgba(234, 179, 8, 0.3);
      white-space: nowrap;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 32px rgba(234, 179, 8, 0.45);
    }

    .danger {
      color: var(--danger);
      font-size: 13px;
      margin-top: 8px;
    }

    .success {
      color: #bbf7d0;
      font-size: 13px;
      margin-top: 8px;
    }

    .result {
      background: rgba(250, 204, 21, 0.1);
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid rgba(250, 204, 21, 0.3);
    }

    .result-label {
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .result-value {
      font-weight: 700;
      color: #facc15;
    }

    .muted {
      font-size: 12px;
      color: var(--text-muted);
    }

    footer {
      margin-top: auto;
      padding: 22px;
      background: #020617;
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 14px;
      color: #e5e7eb;
    }

    body[data-theme="light"] footer {
      background: #0f172a;
      color: #e5e7eb;
    }

    /* Bot√£o flutuante WhatsApp */
    .whatsapp-float {
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: #22c55e;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      font-size: 26px;
      text-decoration: none;
      box-shadow: 0 12px 30px rgba(22, 163, 74, 0.7);
      z-index: 40;
    }

    .whatsapp-float:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 36px rgba(22, 163, 74, 0.85);
    }

    .modo-switch {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .modo-btn {
      background: #111827;
      color: #e5e7eb;
      border-radius: 999px;
      padding: 6px 14px;
      border: 1px solid #1f2937;
      font-size: 12px;
      box-shadow: none;
    }

    body[data-theme="light"] .modo-btn {
      background: #e5e7eb;
      color: #020617;
      border-color: #cbd5f5;
    }

    .modo-btn.active {
      background: linear-gradient(90deg,var(--gold-light),var(--gold));
      color: #020617;
      box-shadow: 0 8px 20px rgba(234,179,8,0.35);
      border-color: transparent;
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 14px;
      }
      .subtitle {
        font-size: 10px;
      }
      .insta-link {
        display: none;
      }
    }
  </style>
</head>

<body data-theme="dark">

<header>
  <div class="brand">
    <h1>
      Calculadora de Viabilidade de Importa√ß√£o
      <span class="subtitle">
        Desenvolvido por Fabio Machado ‚Ä¢ Consultoria, Aulas &amp; Mentoria em Importa√ß√£o
      </span>
    </h1>
  </div>

  <div class="header-right">
    <a href="https://instagram.com/fabiomachado.br" target="_blank" class="insta-link"
       aria-label="Acesse o Instagram de Fabio Machado">@fabiomachado.br</a>
    <button id="themeToggle" type="button">Modo claro</button>
    <div id="cotacaoInfo">Cota√ß√£o: carregando‚Ä¶</div>
  </div>
</header>

<main>

  <!-- üîπ COMO USAR ESTA CALCULADORA -->
  <div class="card">
    <h2>Como usar esta calculadora</h2>
    <p class="muted">
      Esta ferramenta foi criada para te dar uma vis√£o r√°pida da viabilidade de um produto tanto na
      <strong>Importa√ß√£o Simplificada</strong> quanto na <strong>Importa√ß√£o Formal Mar√≠tima ou A√©rea</strong>.
      Siga os passos:
    </p>
    <ol class="muted" style="padding-left:18px; margin-top:6px;">
      <li>Informe o <strong>NCM</strong> e verifique √≥rg√£os anuentes, tributos especiais e poss√≠veis restri√ß√µes.</li>
      <li>Confirme a <strong>cota√ß√£o do d√≥lar</strong> (autom√°tica ou manual).</li>
      <li>Escolha abaixo se quer simular a <strong>Importa√ß√£o Simplificada</strong> ou a
          <strong>Importa√ß√£o Formal Mar√≠tima ou A√©rea</strong>.</li>
      <li>Calcule o <strong>custo unit√°rio</strong> e, em seguida, use a se√ß√£o de
          <strong>viabilidade de venda</strong> para enxergar margem, ROI e retorno do lote.</li>
    </ol>

    <div class="modo-switch" aria-label="Selecione o modo de c√°lculo">
      <button type="button" class="modo-btn active" data-modo="simplificado">
        Modo Simplificado (Courier / Remessa)
      </button>
      <button type="button" class="modo-btn" data-modo="formal">
        Modo Formal (Mar√≠timo / A√©reo)
      </button>
    </div>
    <p class="muted" style="margin-top:8px;">
      Modo atual:
      <strong id="modoAtualLabel">Simplificado (Courier / Remessa Expressa)</strong>
    </p>
    <p class="muted" style="margin-top:8px;">
      Os resultados s√£o aproximados e servem como apoio √† tomada de decis√£o. Para opera√ß√µes formais,
      valide sempre o cen√°rio com seu despachante aduaneiro ou consultor de confian√ßa.
    </p>
  </div>

  <!-- üîπ SE√á√ÉO NCM + TRATAMENTOS -->
  <div class="card">
    <h2>NCM &amp; Tratamentos Administrativos</h2>

    <div class="grid grid-2">
      <div>
        <label for="ncmCodigo">NCM (8 d√≠gitos)</label>
        <input type="text" id="ncmCodigo" maxlength="8" placeholder="ex.: 95030089">
        <p class="muted">Use o bot√£o ao lado para abrir o simulador oficial da Receita e conferir o enquadramento.</p>
      </div>

      <div style="display:flex;align-items:flex-end; justify-content:flex-end;">
        <button type="button" id="consultarNcmBtn">Consultar NCM na Receita</button>
      </div>
    </div>

    <br>

    <div class="grid grid-2">
      <div>
        <label>Permite importa√ß√£o simplificada?</label>
        <select id="ncmSimplificada">
          <option value="">Selecione‚Ä¶</option>
          <option value="sim">Sim</option>
          <option value="nao">N√£o</option>
          <option value="depende">Depende</option>
        </select>
      </div>

      <div>
        <label>Tributos especiais</label>
        <label><input type="checkbox" id="ncmCide"> CIDE</label><br>
        <label><input type="checkbox" id="ncmAntidumping"> Antidumping</label><br>
        <label><input type="checkbox" id="ncmComp"> Medidas compensat√≥rias</label>
      </div>
    </div>

    <br>

    <label>√ìrg√£os anuentes</label>
    <div class="grid grid-3" style="font-size:14px;">
      <label><input type="checkbox" class="ncm-orgao" value="anvisa"> Anvisa</label>
      <label><input type="checkbox" class="ncm-orgao" value="inmetro"> Inmetro</label>
      <label><input type="checkbox" class="ncm-orgao" value="mapa"> MAPA</label>
      <label><input type="checkbox" class="ncm-orgao" value="exercito"> Ex√©rcito</label>
      <label><input type="checkbox" class="ncm-orgao" value="ibama"> Ibama</label>
      <label><input type="checkbox" class="ncm-orgao" value="anatel"> Anatel</label>
      <label><input type="checkbox" class="ncm-orgao" value="outros"> Outros</label>
    </div>

    <br>

    <label>O produto possui bateria?</label>
    <div style="display:flex; gap:16px; font-size:14px;">
      <label><input type="radio" name="produtoBateria" value="nao" checked> N√£o</label>
      <label><input type="radio" name="produtoBateria" value="sim"> Sim</label>
    </div>

    <br>

    <label>O produto √© Bluetooth ou Wi-Fi?</label>
    <div style="display:flex; gap:16px; font-size:14px;">
      <label><input type="radio" name="produtoRadio" value="nao" checked> N√£o</label>
      <label><input type="radio" name="produtoRadio" value="sim"> Sim</label>
    </div>

    <br>

    <label>Observa√ß√µes / Anota√ß√µes</label>
    <textarea id="ncmObs" rows="4"
      placeholder="Use este espa√ßo para anotar detalhes relevantes do NCM, descri√ß√£o da mercadoria, exce√ß√µes, etc."></textarea>

    <div id="ncmAlerta" class="danger"></div>
  </div>

  <!-- üîπ SE√á√ÉO C√ÇMBIO (COMUM AOS DOIS MODOS) -->
  <div class="card">
    <h2>C√¢mbio</h2>

    <label><input type="checkbox" id="cotacaoAuto" checked> Usar cota√ß√£o autom√°tica</label>

    <label>Cota√ß√£o do d√≥lar (USD ‚Üí BRL)</label>
    <input type="number" id="cotacao" step="0.0001" disabled>
    <p class="muted">Se preferir, desmarque a op√ß√£o acima para editar a cota√ß√£o manualmente.</p>
  </div>

  <!-- ======================= -->
  <!-- üîπ MODO SIMPLIFICADO   -->
  <!-- ======================= -->
  <section id="secaoSimplificado">

    <!-- PRODUTO SIMPLIFICADO -->
    <div class="card">
      <h2>Produto &amp; Custos (Modo Simplificado ‚Äì USD)</h2>

      <div class="grid grid-2">
        <div>
          <label>Nome do produto</label>
          <input type="text" id="produtoNome" placeholder="Ex.: Fone Bluetooth">
        </div>

        <div>
          <label>Custo unit√°rio (USD)</label>
          <input type="number" id="custoUSD" step="0.01" value="0.24">
        </div>

        <div>
          <label>Quantidade</label>
          <input type="number" id="quantidade" value="1250">
        </div>

        <div>
          <label>Frete internacional (USD)</label>
          <input type="number" id="freteUSD" step="0.01" value="250">
        </div>

        <div>
          <label>Seguro internacional (USD)</label>
          <input type="number" id="seguroUSD" step="0.01" value="0">
        </div>
      </div>
    </div>

    <!-- IMPOSTOS SIMPLIFICADOS -->
    <div class="card">
      <h2>Impostos ‚Äì Importa√ß√£o Simplificada</h2>

      <div class="grid grid-2">
        <div>
          <label>II ‚Äì Imposto de Importa√ß√£o (%)</label>
          <input type="number" id="iiPercent" value="60">
        </div>

        <div>
          <label>ICMS do estado (%)</label>
          <input type="number" id="icmsPercent" value="18">
        </div>
      </div>
    </div>

    <!-- BOT√ÉO CALCULAR SIMPLIFICADO -->
    <div class="card" style="text-align:center;">
      <button id="calcularBtn">Calcular custo da importa√ß√£o simplificada</button>
    </div>

    <!-- RESULTADO SIMPLIFICADO -->
    <div class="card result" id="resultadoCard" style="display:none;">
      <h2>Resultado da Importa√ß√£o Simplificada</h2>

      <div class="result-label">
        Valor dos produtos (BRL):
        <span class="result-value" id="resProdutos"></span>
      </div>
      <div class="result-label">
        Valor do frete + seguro (BRL):
        <span class="result-value" id="resFreteSeguro"></span>
      </div>
      <div class="result-label">
        Valor dos impostos (II + ICMS) (BRL):
        <span class="result-value" id="resImpostos"></span>
      </div>
      <div class="result-label">
        Taxa courier (m√≠n. 18,8 USD ou 2% da base) (BRL):
        <span class="result-value" id="resCourier"></span>
      </div>

      <hr>

      <div class="result-label">
        Custo total do lote:
        <span class="result-value" id="resultadoTotal"></span>
      </div>

      <div class="result-label">
        Custo unit√°rio do produto:
        <span class="result-value" id="resultadoUnitario"></span>
      </div>

      <p class="muted" id="resResumoBase"></p>
    </div>
  </section>

  <!-- ======================= -->
  <!-- üîπ MODO FORMAL          -->
  <!-- ======================= -->
  <section id="secaoFormal" style="display:none;">

    <div class="card">
      <h2>Importa√ß√£o Formal (Mar√≠tima / A√©rea) ‚Äì Custos Aduaneiros e Log√≠sticos</h2>
      <p class="muted">
        Use esta se√ß√£o para simular uma opera√ß√£o de Importa√ß√£o Formal Mar√≠tima ou A√©rea, com DI completa.
        Preencha os campos em verde (valores de exemplo).
      </p>

      <div class="grid grid-2">
        <div>
          <label>Custo unit√°rio do produto (USD)</label>
          <input type="number" id="custoUSDF" step="0.01" value="3.50">
        </div>

        <div>
          <label>Quantidade</label>
          <input type="number" id="quantidadeF" value="500">
        </div>

        <div>
          <label>Frete internacional (USD)</label>
          <input type="number" id="freteUSDF" step="0.01" value="300">
        </div>

        <div>
          <label>Seguro internacional (USD)</label>
          <input type="number" id="seguroUSDF" step="0.01" value="50">
        </div>

        <div>
          <label>Siscomex / Taxas sist√™micas (R$)</label>
          <input type="number" id="siscomexBRL" step="0.01" value="250">
        </div>

        <div>
          <label>Despachante aduaneiro (R$)</label>
          <input type="number" id="despachanteBRL" step="0.01" value="2300">
        </div>

        <div>
          <label>Armazenagem / Terminal (R$)</label>
          <input type="number" id="armazenagemBRL" step="0.01" value="650">
        </div>

        <div>
          <label>Taxas portu√°rias / handling (R$)</label>
          <input type="number" id="taxasPortuariasBRL" step="0.01" value="380">
        </div>

        <div>
          <label>Transporte interno / rodovi√°rio (R$)</label>
          <input type="number" id="transporteBRL" step="0.01" value="1284">
        </div>

        <div>
          <label>Outras despesas (R$)</label>
          <input type="number" id="outrosBRL" step="0.01" value="0">
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Tributos Federais &amp; ICMS ‚Äì Importa√ß√£o Formal</h2>
      <div class="grid grid-2">
        <div>
          <label>II ‚Äì Imposto de Importa√ß√£o (%)</label>
          <input type="number" id="aliqIIF" value="20">
        </div>
        <div>
          <label>IPI ‚Äì Imposto sobre Produto Industrializado (%)</label>
          <input type="number" id="aliqIPIF" value="5">
        </div>
        <div>
          <label>PIS (%)</label>
          <input type="number" id="aliqPISF" value="1.65">
        </div>
        <div>
          <label>COFINS (%)</label>
          <input type="number" id="aliqCOFINSF" value="7.6">
        </div>
        <div>
          <label>ICMS (%)</label>
          <input type="number" id="aliqICMSF" value="18">
        </div>
        <div>
          <label><input type="checkbox" id="icmsGrossUp" checked> ICMS com gross-up na base</label>
          <p class="muted">Desmarque se quiser simular ICMS sem gross-up.</p>
        </div>
      </div>
    </div>

    <div class="card" style="text-align:center;">
      <button id="calcularFormalBtn" type="button">Calcular custo da importa√ß√£o formal</button>
    </div>

    <div class="card result" id="resultadoFormalCard" style="display:none;">
      <h2>Resultado da Importa√ß√£o Formal</h2>

      <div class="result-label">
        CIF (produto + frete + seguro):
        <span class="result-value" id="resFormalCIF"></span>
      </div>
      <div class="result-label">
        Tributos totais (II + IPI + PIS + COFINS + ICMS):
        <span class="result-value" id="resFormalTributos"></span>
      </div>
      <div class="result-label">
        Outras despesas aduaneiras/log√≠sticas:
        <span class="result-value" id="resFormalDespesas"></span>
      </div>

      <hr>

      <div class="result-label">
        Custo total da importa√ß√£o:
        <span class="result-value" id="resultadoFormalTotal"></span>
      </div>
      <div class="result-label">
        Custo unit√°rio do produto:
        <span class="result-value" id="resultadoFormalUnitario"></span>
      </div>

      <p class="muted" id="resFormalResumo"></p>
    </div>
  </section>

  <!-- üîπ SIMULAR VIABILIDADE DE VENDA (COMUM AOS DOIS MODOS) -->
  <div class="card" id="viabilidadeCard" style="display:none;">
    <h2>Simular Viabilidade de Venda</h2>
    <p class="muted">
      Depois de calcular o custo unit√°rio (simplificado ou formal), preencha os campos abaixo para ver
      margem, ROI e retorno do lote.
    </p>

    <div class="grid grid-2">
      <div>
        <label>Valor da venda (R$)</label>
        <input type="number" id="vVenda" step="0.01" value="19.90">
      </div>

      <div>
        <label>Tarifa fixa do marketplace (R$)</label>
        <input type="number" id="vTarifaFixa" step="0.01" value="6.00">
      </div>

      <div>
        <label>Tarifa an√∫ncio (%)</label>
        <input type="number" id="vTarifaAnuncioPercent" step="0.01" value="13.00">
      </div>

      <div>
        <label>Impostos sobre venda (%)</label>
        <input type="number" id="vImpostosPercent" step="0.01" value="4.00">
      </div>

      <div>
        <label>Embalagem (R$)</label>
        <input type="number" id="vEmbalagem" step="0.01" value="0.50">
      </div>

      <div>
        <label>Custo do produto (R$)</label>
        <input type="number" id="vCustoProduto" step="0.01">
      </div>
    </div>

    <div style="text-align:center;margin-top:14px;">
      <button id="btnCalcVenda" type="button">Calcular viabilidade de venda</button>
    </div>

    <div class="result" id="viabResultado" style="margin-top:14px; display:none;">
      <div class="result-label">
        Margem contribui√ß√£o (por unidade):
        <span class="result-value" id="viabMargem"></span>
      </div>
      <div class="result-label">
        Margem ROI:
        <span class="result-value" id="viabROI"></span>
      </div>
      <div class="result-label">
        Investimento √ó Retorno (lote):
        <span class="result-value" id="viabMontao"></span>
      </div>

      <div id="viabAlerta"></div>
    </div>
  </div>

  <!-- üîπ SOBRE F√ÅBIO MACHADO -->
  <div class="card">
    <h2>Sobre F√°bio Machado</h2>
    <p class="muted">
      F√°bio Machado atua h√° anos com com√©rcio exterior, apoiando opera√ß√µes de
      <strong>Importa√ß√£o Simplificada</strong> e
      <strong>Importa√ß√£o Formal Mar√≠tima ou A√©rea</strong>, al√©m de estrat√©gias de venda em marketplaces
      e canais digitais. O foco √© sempre construir opera√ß√µes sustent√°veis, com leitura correta de NCM,
      enquadramento tribut√°rio e escolha do canal de importa√ß√£o mais vantajoso para cada caso.
    </p>
    <p class="muted">
      Esta calculadora foi criada para que voc√™ tenha uma vis√£o clara de custos, riscos e viabilidade antes de
      fechar qualquer pedido com o fornecedor, trazendo para o digital a mesma l√≥gica pr√°tica utilizada em
      consultorias, aulas e mentorias individuais.
    </p>
    <p class="muted">
      Acompanhe o dia a dia das opera√ß√µes, an√°lises de casos reais e conte√∫dos sobre importa√ß√£o no Instagram:
      <a href="https://instagram.com/fabiomachado.br" target="_blank"
         style="color:#38bdf8; text-decoration:none; font-weight:500;">@fabiomachado.br</a>.
    </p>
  </div>

  <!-- üîπ QUER APRENDER A IMPORTAR COMIGO? -->
  <div class="card" style="border-color: rgba(250,204,21,0.6);">
    <h2>Quer aprender a importar comigo?</h2>

    <p class="muted">
      Voc√™ pode aprender importa√ß√£o de forma estruturada atrav√©s das <strong>aulas completas</strong>, onde ensino passo a passo
      tudo sobre NCM, leitura aduaneira, Importa√ß√£o Simplificada e Importa√ß√£o Formal Mar√≠tima ou A√©rea, contratos, fornecedores,
      c√°lculo de custos e estrat√©gias para ter margem real nos marketplaces.
    </p>
    <p class="muted">
      Para quem busca um acompanhamento mais pr√≥ximo, existe tamb√©m a <strong>mentoria individual</strong>, onde voc√™ recebe
      orienta√ß√µes personalizadas e ainda tem acesso a uma rede de parceiros: empresas especializadas em contrato de c√¢mbio,
      despachantes aduaneiros de confian√ßa e agentes de cargas que ajudam a reduzir o custo da sua importa√ß√£o de forma estrat√©gica
      ‚Äî contatos exclusivos para alunos.
    </p>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;">
      <a href="https://wa.me/message/UDEZKZS4LQWXB1" target="_blank">
        <button type="button">Falar sobre aulas e mentoria</button>
      </a>

      <a href="https://instagram.com/fabiomachado.br" target="_blank">
        <button type="button"
          style="background:linear-gradient(90deg,#fb7185,#ec4899); color:white; box-shadow:0 8px 20px rgba(236,72,153,0.4);">
          Ver bastidores no Instagram
        </button>
      </a>
    </div>
  </div>

  <!-- üîπ FAQ / PERGUNTAS FREQUENTES -->
  <div class="card">
    <h2>Perguntas frequentes</h2>

    <details style="margin-bottom:8px;">
      <summary style="cursor:pointer; font-size:14px; font-weight:600;">
        Qual a diferen√ßa entre Importa√ß√£o Simplificada e Importa√ß√£o Formal Mar√≠tima ou A√©rea?
      </summary>
      <p class="muted" style="margin-top:6px;">
        De forma bem direta: a <strong>Importa√ß√£o Simplificada</strong> costuma ser usada para remessas de menor valor,
        normalmente via courier, com um fluxo mais enxuto de despacho. J√° a
        <strong>Importa√ß√£o Formal Mar√≠tima ou A√©rea</strong> envolve registro completo da declara√ß√£o de importa√ß√£o,
        canal de fiscaliza√ß√£o, despacho em porto ou aeroporto e regras mais detalhadas de documenta√ß√£o.
        Cada modalidade tem limites, riscos e custos diferentes ‚Äî e √© isso que explico com calma nas aulas.
      </p>
    </details>

    <details style="margin-bottom:8px;">
      <summary style="cursor:pointer; font-size:14px; font-weight:600;">
        Os valores desta calculadora s√£o 100% exatos?
      </summary>
      <p class="muted" style="margin-top:6px;">
        N√£o. A calculadora √© uma ferramenta de apoio, com base em par√¢metros que voc√™ mesmo informa
        (al√≠quotas, taxas, frete, etc.). O objetivo √© te dar clareza de ordem de grandeza e viabilidade do projeto.
        Para n√∫meros finais, principalmente em opera√ß√µes formais, √© importante alinhar com seu despachante aduaneiro
        e acompanhar a legisla√ß√£o atualizada.
      </p>
    </details>

    <details style="margin-bottom:8px;">
      <summary style="cursor:pointer; font-size:14px; font-weight:600;">
        Serve para pessoa f√≠sica e para empresa?
      </summary>
      <p class="muted" style="margin-top:6px;">
        Sim. A l√≥gica de c√°lculo de custos funciona tanto para quem importa como pessoa f√≠sica quanto para CNPJ.
        O que muda √© o enquadramento, limites de valor, possibilidade de aproveitamento de cr√©dito e algumas regras
        espec√≠ficas ‚Äî temas que s√£o abordados de forma detalhada nas aulas e mentorias.
      </p>
    </details>

    <details>
      <summary style="cursor:pointer; font-size:14px; font-weight:600;">
        O que eu ganho ao estudar com voc√™ em vez de s√≥ usar a calculadora?
      </summary>
      <p class="muted" style="margin-top:6px;">
        A calculadora te ajuda a fazer conta, mas √© o <strong>conhecimento de contexto</strong> que evita erro caro:
        entender quando faz sentido Simplificada ou Formal, como negociar com fornecedor, quais documentos exigir,
        como se proteger de surpresas de tributa√ß√£o e como transformar tudo isso em lucro real nos marketplaces.
        √â isso que eu entrego nas aulas e na mentoria.
      </p>
    </details>
  </div>

</main>

<footer>
  <p style="margin:4px 0; opacity:0.9;">
    Desenvolvido por <strong>Fabio Machado Consultoria &amp; Mentoria em Importa√ß√£o</strong>
  </p>

  <p style="margin:6px 0 10px;">
    Quer aprender a importar da maneira correta, evitando erros e preju√≠zos?
    <br>
    <a href="https://wa.me/message/UDEZKZS4LQWXB1"
       target="_blank"
       style="color:#facc15; font-weight:600; text-decoration:none;">
      Fale conosco pelo WhatsApp üì≤ (12) 99184-4541
    </a>
  </p>

  <p style="margin:4px 0; font-size:12px; opacity:0.7;">
    Este simulador √© para fins educacionais ‚Äî atualize sempre as al√≠quotas, taxas e par√¢metros conforme sua opera√ß√£o
    e consulte seu despachante ou assessor aduaneiro antes de tomar decis√µes.
  </p>
</footer>

<!-- Bot√£o flutuante WhatsApp -->
<a href="https://wa.me/message/UDEZKZS4LQWXB1"
   class="whatsapp-float"
   target="_blank"
   aria-label="Falar com Fabio Machado no WhatsApp">
  üí¨
</a>

<script>
  /* ================================
       0) TEMA CLARO/ESCURO
  =================================*/
  const themeToggle = document.getElementById("themeToggle");
  const themeColorMeta = document.getElementById("themeColorMeta");

  function applyTheme(theme) {
    document.body.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);
    themeToggle.textContent = theme === "dark" ? "Modo claro" : "Modo escuro";
    themeColorMeta.setAttribute("content", theme === "dark" ? "#020617" : "#f3f4f6");
  }

  const savedTheme = localStorage.getItem("theme") || "dark";
  applyTheme(savedTheme);

  themeToggle.addEventListener("click", () => {
    const current = document.body.getAttribute("data-theme") || "dark";
    applyTheme(current === "dark" ? "light" : "dark");
  });

  /* ================================
       0.1) MODO SIMPLIFICADO x FORMAL
  =================================*/
  const secaoSimplificado = document.getElementById("secaoSimplificado");
  const secaoFormal = document.getElementById("secaoFormal");
  const modoBtns = document.querySelectorAll(".modo-btn");
  const modoLabel = document.getElementById("modoAtualLabel");

  modoBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      const modo = btn.dataset.modo;
      if (modo === "simplificado") {
        secaoSimplificado.style.display = "";
        secaoFormal.style.display = "none";
        modoLabel.textContent = "Simplificado (Courier / Remessa Expressa)";
      } else {
        secaoSimplificado.style.display = "none";
        secaoFormal.style.display = "";
        modoLabel.textContent = "Formal (Mar√≠timo / A√©reo - despacho completo)";
      }
      modoBtns.forEach(b => b.classList.toggle("active", b === btn));
    });
  });

  /* ================================
       1) COTA√á√ÉO AUTOM√ÅTICA
  =================================*/
  const cotacaoTexto = document.getElementById("cotacaoInfo");
  const cotacaoInput = document.getElementById("cotacao");
  const cotacaoAuto = document.getElementById("cotacaoAuto");

  async function buscarCotacao() {
    try {
      cotacaoTexto.textContent = "Cota√ß√£o: carregando‚Ä¶";
      const res = await fetch("https://economia.awesomeapi.com.br/json/last/USD-BRL");
      const data = await res.json();
      const rate = parseFloat(data.USDBRL.bid);
      if (!isNaN(rate)) {
        cotacaoInput.value = rate.toFixed(4);
        cotacaoTexto.textContent = "Cota√ß√£o: R$ " + rate.toFixed(4);
      } else {
        cotacaoTexto.textContent = "Cota√ß√£o: erro";
      }
    } catch (e) {
      cotacaoTexto.textContent = "Cota√ß√£o: erro";
    }
  }

  buscarCotacao();
  setInterval(buscarCotacao, 60000);

  cotacaoAuto.addEventListener("change", () => {
    cotacaoInput.disabled = cotacaoAuto.checked;
    if (cotacaoAuto.checked) buscarCotacao();
  });

  /* ================================
       2) NCM ALERTAS + OBSERVA√á√ïES
  =================================*/
  const ncmSimplificada = document.getElementById("ncmSimplificada");
  const ncmCide = document.getElementById("ncmCide");
  const ncmAntidumping = document.getElementById("ncmAntidumping");
  const ncmComp = document.getElementById("ncmComp");
  const ncmAlerta = document.getElementById("ncmAlerta");
  const ncmObs = document.getElementById("ncmObs");
  const orgaosCheckboxes = document.querySelectorAll(".ncm-orgao");
  const bateriaRadios = document.querySelectorAll('input[name="produtoBateria"]');
  const radioRadios = document.querySelectorAll('input[name="produtoRadio"]');
  const orgaoAnatel = Array.from(orgaosCheckboxes).find(c => c.value === "anatel");

  let manualObs = "";
  let updatingObs = false;

  // Guarda parte manual digitada pelo aluno
  ncmObs.addEventListener("input", () => {
    if (updatingObs) return;
    const marker = "\n\n--- Observa√ß√µes autom√°ticas ---";
    const texto = ncmObs.value;
    const idx = texto.indexOf(marker);
    manualObs = idx >= 0 ? texto.slice(0, idx) : texto;
  });

  function atualizarAlertasNCM() {
    const msgs = [];

    if (ncmSimplificada.value === "nao")
      msgs.push("‚ö†Ô∏è Este NCM foi marcado como n√£o eleg√≠vel √† importa√ß√£o simplificada.");

    if (ncmAntidumping.checked)
      msgs.push("‚ö†Ô∏è NCM com antidumping: revise viabilidade, pode inviabilizar a importa√ß√£o.");

    ncmAlerta.textContent = msgs.join(" | ");
    atualizarObsAutomaticas();
  }

  function atualizarObsAutomaticas() {
    const autoMsgs = [];

    // √ìrg√£os anuentes
    const selecionados = Array.from(orgaosCheckboxes)
      .filter(c => c.checked)
      .map(c => {
        const mapa = {
          anvisa: "Anvisa",
          inmetro: "Inmetro",
          mapa: "MAPA",
          exercito: "Ex√©rcito",
          ibama: "Ibama",
          anatel: "ANATEL",
          outros: "outros √≥rg√£os competentes"
        };
        return mapa[c.value] || c.value;
      });

    if (selecionados.length > 0) {
      const lista = selecionados.join(", ");
      autoMsgs.push(
        "Este NCM possui tratamento administrativo com √≥rg√£o(s) anuente(s): " + lista +
        ". Em regra, mercadorias sujeitas √† anu√™ncia desses √≥rg√£os n√£o s√£o enquadradas como remessa simplificada. " +
        "Considere planejar a opera√ß√£o via despacho formal e providenciar previamente as certifica√ß√µes, licen√ßas e registros correspondentes antes de importar."
      );
      if (!ncmSimplificada.value) {
        ncmSimplificada.value = "nao";
      }
    }

    // CIDE / Antidumping / Medidas compensat√≥rias
    if (ncmCide.checked || ncmAntidumping.checked || ncmComp.checked) {
      autoMsgs.push(
        "Foi sinalizada a exist√™ncia de CIDE, antidumping e/ou medidas compensat√≥rias para este NCM. " +
        "Revise com aten√ß√£o as al√≠quotas e condi√ß√µes no S√≠tio de Apoio ao Importador (Portal √önico/Siscomex) " +
        "e valide com seu despachante ou assessor aduaneiro se a opera√ß√£o √© permitida e permanece economicamente vi√°vel."
      );
    }

    // Produto com bateria
    const bateriaValor = Array.from(bateriaRadios).find(r => r.checked)?.value;
    if (bateriaValor === "sim") {
      autoMsgs.push(
        "Produto com bateria: solicite ao fornecedor a ficha de seguran√ßa MSDS (Material Safety Data Sheet) " +
        "e confirme com o courier/transportadora as exig√™ncias espec√≠ficas para transporte, embalagem e documenta√ß√£o."
      );
    }

    // Produto com Bluetooth / Wi-Fi ‚Üí ANATEL
    const rfValor = Array.from(radioRadios).find(r => r.checked)?.value;
    if (rfValor === "sim") {
      if (orgaoAnatel && !orgaoAnatel.checked) orgaoAnatel.checked = true;

      autoMsgs.push(
        "Produto com tecnologia sem fio (Bluetooth e/ou Wi-Fi): dispositivos que operam em radiofrequ√™ncia " +
        "est√£o sujeitos √† homologa√ß√£o ou declara√ß√£o de conformidade junto √† ANATEL. " +
        "Mesmo em remessas expressas/simplificadas, a exig√™ncia t√©cnica permanece. Confirme com o fornecedor se o produto j√° possui certifica√ß√£o v√°lida " +
        "e avalie a viabilidade de regulariza√ß√£o antes de importar."
      );

      if (!ncmSimplificada.value) {
        ncmSimplificada.value = "depende";
      }
    }

    const marker = "\n\n--- Observa√ß√µes autom√°ticas ---\n";
    updatingObs = true;

    if (autoMsgs.length > 0) {
      if (manualObs.trim().length > 0) {
        ncmObs.value = manualObs + marker + autoMsgs.join("\n\n");
      } else {
        ncmObs.value = "--- Observa√ß√µes autom√°ticas ---\n" + autoMsgs.join("\n\n");
      }
    } else {
      ncmObs.value = manualObs;
    }

    updatingObs = false;
  }

  ncmSimplificada.addEventListener("change", atualizarAlertasNCM);
  ncmAntidumping.addEventListener("change", atualizarAlertasNCM);
  ncmCide.addEventListener("change", atualizarObsAutomaticas);
  ncmComp.addEventListener("change", atualizarObsAutomaticas);
  orgaosCheckboxes.forEach(c => c.addEventListener("change", atualizarObsAutomaticas));
  bateriaRadios.forEach(r => r.addEventListener("change", atualizarObsAutomaticas));
  radioRadios.forEach(r => r.addEventListener("change", atualizarObsAutomaticas));

  document.getElementById("consultarNcmBtn")
    .addEventListener("click", function () {
      window.open("https://www4.receita.fazenda.gov.br/simulador/", "_blank");
    });

  /* ================================
       3) FUN√á√ïES AUXILIARES
  =================================*/
  function brl(v) {
    return v.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
  }

  function num(id) {
    const v = parseFloat(document.getElementById(id).value);
    return isNaN(v) ? 0 : v;
  }

  /* ================================
       4) C√ÅLCULO IMPORTA√á√ÉO SIMPLIFICADA
  =================================*/
  document.getElementById("calcularBtn").addEventListener("click", () => {
    const cotacao = parseFloat(cotacaoInput.value);
    const custoUSD = parseFloat(document.getElementById("custoUSD").value);
    const qtd = parseInt(document.getElementById("quantidade").value);
    const freteUSD = parseFloat(document.getElementById("freteUSD").value);
    const seguroUSD = parseFloat(document.getElementById("seguroUSD").value);
    const iiPercent = parseFloat(document.getElementById("iiPercent").value) / 100;
    const icmsPercent = parseFloat(document.getElementById("icmsPercent").value) / 100;

    if (!cotacao || cotacao <= 0 || !qtd || qtd <= 0) {
      alert("Informe uma cota√ß√£o v√°lida e
