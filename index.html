<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Importa√ß√£o Simplificada | F√°bio Machado Consultoria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
        content="Calculadora de Importa√ß√£o Simplificada com viabilidade de venda em marketplace. Desenvolvida por F√°bio Machado Consultoria e Mentoria em Importa√ß√£o." />
  <meta name="theme-color" content="#020617" />

  <!-- Open Graph / Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Calculadora de Importa√ß√£o Simplificada | F√°bio Machado" />
  <meta property="og:description"
        content="Simule rapidamente custos de importa√ß√£o simplificada, impostos, courier e margem l√≠quida de venda." />
  <meta property="og:url" content="https://fabioluisamachado01-alt.github.io/calculadora-importacao/" />
  <meta property="og:site_name" content="F√°bio Machado Consultoria" />

  <!-- Manifest PWA -->
  <link rel="manifest" href="manifest.webmanifest" />

  <style>
    :root {
      --navy: #020617;
      --navy-light: #0f172a;
      --gold: #eab308;
      --gold-light: #facc15;
      --border: #1e293b;
      --text: #e5e7eb;
      --text-muted: #9ca3af;
      --card-bg: linear-gradient(145deg, #111827 0%, #020617 70%);
      --body-bg: radial-gradient(circle at top, #1e293b 0, #020617 55%, #000 100%);
    }

    * {
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      margin: 0;
      background: var(--body-bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      transition: background 0.25s ease, color 0.25s ease;
    }

    header {
      border-bottom: 1px solid var(--border);
      padding: 10px 18px;
      background: rgba(2, 6, 23, 0.92);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }

    .logo {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      object-fit: contain;
      background: #0f172a;
      padding: 4px;
      box-shadow: 0 0 12px rgba(234, 179, 8, 0.6);
    }

    header h1 {
      font-size: 16px;
      margin: 0;
      font-weight: 600;
      line-height: 1.3;
    }

    header h1 span.sub {
      display: block;
      font-size: 12px;
      color: #facc15;
      font-weight: 400;
    }

    #cotacaoInfo {
      font-size: 12px;
      color: var(--text-muted);
      text-align: right;
      white-space: nowrap;
    }

    .theme-toggle {
      border: 1px solid var(--border);
      background: #020617;
      color: #e5e7eb;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .theme-toggle span {
      font-size: 14px;
    }

    main {
      max-width: 1000px;
      margin: 24px auto;
      padding: 0 16px 70px;
      width: 100%;
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      padding: 20px;
      border-radius: 14px;
      margin-bottom: 20px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.45);
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 18px;
      font-weight: 600;
    }

    .grid {
      display: grid;
      gap: 14px;
    }

    @media (min-width: 640px) {
      .grid-2 { grid-template-columns: repeat(2, 1fr); }
      .grid-3 { grid-template-columns: repeat(3, 1fr); }
    }

    label {
      font-size: 13px;
      margin-bottom: 6px;
      display: block;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px 10px;
      background: #0f172a;
      color: #e5e7eb;
      border: 1px solid #1f2937;
      border-radius: 10px;
      font-size: 14px;
      outline: none;
      transition: border 0.15s, box-shadow 0.15s, background 0.15s;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 1px rgba(234, 179, 8, 0.5);
    }

    textarea { resize: vertical; }

    button {
      background: linear-gradient(90deg, var(--gold-light), var(--gold));
      color: #0f172a;
      border: none;
      padding: 10px 22px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.15s;
      box-shadow: 0 8px 20px rgba(234, 179, 8, 0.3);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 32px rgba(234, 179, 8, 0.45);
    }

    .danger {
      color: #fca5a5;
      font-size: 13px;
      margin-top: 8px;
    }

    .success {
      color: #bbf7d0;
      font-size: 13px;
      margin-top: 8px;
    }

    .result {
      background: rgba(250, 204, 21, 0.1);
      padding: 16px;
      border-radius: 14px;
      border: 1px solid rgba(250, 204, 21, 0.3);
    }

    .result-label {
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      gap: 8px;
    }

    .result-value {
      font-weight: 700;
      color: #facc15;
    }

    .muted {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* WhatsApp flutuante */
    .whatsapp-float {
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 54px;
      height: 54px;
      border-radius: 999px;
      background: #22c55e;
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      text-decoration: none;
      box-shadow: 0 12px 25px rgba(22, 163, 74, 0.6);
      z-index: 50;
    }

    .whatsapp-float:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    /* Footer */
    footer {
      margin-top: auto;
      padding: 22px;
      background: #0f172a;
      border-top: 1px solid #1e293b;
      text-align: center;
      font-size: 14px;
      color: #e5e7eb;
    }

    footer a {
      color: #facc15;
      font-weight: 600;
      text-decoration: none;
    }

    footer a:hover { text-decoration: underline; }

    /* Light mode overrides */
    body.light {
      --body-bg: #f3f4f6;
      --card-bg: #ffffff;
      --text: #0f172a;
      --text-muted: #6b7280;
      --border: #e5e7eb;
    }

    body.light {
      background: var(--body-bg);
      color: var(--text);
    }

    body.light header {
      background: #ffffff;
      border-bottom-color: #e5e7eb;
    }

    body.light .card {
      box-shadow: 0 12px 24px rgba(15,23,42,0.12);
    }

    body.light input,
    body.light select,
    body.light textarea {
      background: #f9fafb;
      color: #0f172a;
      border-color: #e5e7eb;
    }

    body.light footer {
      background: #ffffff;
      border-top-color: #e5e7eb;
      color: #111827;
    }
  </style>
</head>

<body>
<header>
  <div class="header-left">
    <img src="logo-fabio-machado.png"
         alt="F√°bio Machado Consultoria Estrat√©gica"
         class="logo">
    <div>
      <h1>
        Calculadora de Importa√ß√£o ‚Äì Modo Simplificado
        <span class="sub">F√°bio Machado ‚Ä¢ Consultoria e Mentoria em Importa√ß√£o</span>
      </h1>
    </div>
  </div>

  <div style="display:flex; flex-direction:column; gap:6px; align-items:flex-end;">
    <div id="cotacaoInfo">Cota√ß√£o: carregando...</div>
    <button type="button" class="theme-toggle" id="themeToggle" aria-label="Alternar tema claro/escuro">
      <span id="themeIcon">üåô</span> <span id="themeText">Modo escuro</span>
    </button>
  </div>
</header>

<main>
  <!-- üîπ SE√á√ÉO NCM + TRATAMENTOS -->
  <div class="card">
    <h2>NCM & Tratamentos Administrativos</h2>

    <div class="grid grid-2">
      <div>
        <label for="ncmCodigo">NCM (8 d√≠gitos)</label>
        <input type="text" id="ncmCodigo" maxlength="8" placeholder="ex.: 95030089">
      </div>

      <div style="display:flex;align-items:flex-end;">
        <button type="button" id="consultarNcmBtn">Consultar NCM na Receita</button>
      </div>
    </div>

    <br>

    <div class="grid grid-2">
      <div>
        <label>Permite importa√ß√£o simplificada?</label>
        <select id="ncmSimplificada">
          <option value="">Selecione...</option>
          <option value="sim">Sim</option>
          <option value="nao">N√£o</option>
          <option value="depende">Depende</option>
        </select>
      </div>

      <div>
        <label>Tributos especiais</label>
        <label><input type="checkbox" id="ncmCide"> CIDE</label><br>
        <label><input type="checkbox" id="ncmAntidumping"> Antidumping</label><br>
        <label><input type="checkbox" id="ncmComp"> Medidas compensat√≥rias</label>
      </div>
    </div>

    <br>

    <label>√ìrg√£os anuentes</label>
    <div class="grid grid-3" style="font-size:14px;">
      <label><input type="checkbox" class="ncm-orgao" value="anvisa"> Anvisa</label>
      <label><input type="checkbox" class="ncm-orgao" value="inmetro"> Inmetro</label>
      <label><input type="checkbox" class="ncm-orgao" value="mapa"> MAPA</label>
      <label><input type="checkbox" class="ncm-orgao" value="exercito"> Ex√©rcito</label>
      <label><input type="checkbox" class="ncm-orgao" value="ibama"> Ibama</label>
      <label><input type="checkbox" class="ncm-orgao" value="anatel"> Anatel</label>
      <label><input type="checkbox" class="ncm-orgao" value="outros"> Outros</label>
    </div>

    <br>

    <label>O produto possui bateria?</label>
    <div style="display:flex; gap:16px; font-size:14px;">
      <label><input type="radio" name="produtoBateria" value="nao" checked> N√£o</label>
      <label><input type="radio" name="produtoBateria" value="sim"> Sim</label>
    </div>

    <br>

    <label>O produto possui Bluetooth ou Wi-Fi?</label>
    <div style="display:flex; gap:16px; font-size:14px;">
      <label><input type="radio" name="produtoRF" value="nao" checked> N√£o</label>
      <label><input type="radio" name="produtoRF" value="sim"> Sim</label>
    </div>

    <br>

    <label>Observa√ß√µes / Anota√ß√µes</label>
    <textarea id="ncmObs" rows="4" placeholder="Use este espa√ßo para anotar detalhes relevantes do NCM, descri√ß√£o da mercadoria, exce√ß√µes, etc."></textarea>

    <div id="ncmAlerta" class="danger"></div>
  </div>

  <!-- üîπ SE√á√ÉO C√ÇMBIO -->
  <div class="card">
    <h2>C√¢mbio</h2>

    <label><input type="checkbox" id="cotacaoAuto" checked> Usar cota√ß√£o autom√°tica</label>

    <label>Cota√ß√£o do d√≥lar (USD ‚Üí BRL)</label>
    <input type="number" id="cotacao" step="0.0001" disabled>
    <p class="muted">Se preferir, desmarque a op√ß√£o acima para editar a cota√ß√£o manualmente.</p>
  </div>

  <!-- üîπ PRODUTO -->
  <div class="card">
    <h2>Produto & Custos (USD)</h2>

    <div class="grid grid-2">

      <div>
        <label>Nome do produto</label>
        <input type="text" id="produtoNome" placeholder="Ex.: Fone Bluetooth">
      </div>

      <div>
        <label>Custo unit√°rio (USD)</label>
        <input type="number" id="custoUSD" step="0.01" value="0.24">
      </div>

      <div>
        <label>Quantidade</label>
        <input type="number" id="quantidade" value="1250">
      </div>

      <div>
        <label>Frete internacional (USD)</label>
        <input type="number" id="freteUSD" step="0.01" value="250">
      </div>

      <div>
        <label>Seguro internacional (USD)</label>
        <input type="number" id="seguroUSD" step="0.01" value="0">
      </div>
    </div>
  </div>

  <!-- üîπ IMPOSTOS -->
  <div class="card">
    <h2>Impostos Simplificados</h2>

    <div class="grid grid-2">
      <div>
        <label>II ‚Äì Imposto de Importa√ß√£o (%)</label>
        <input type="number" id="iiPercent" value="60">
      </div>

      <div>
        <label>ICMS do estado (%)</label>
        <input type="number" id="icmsPercent" value="18">
      </div>
    </div>
  </div>

  <!-- üîπ BOT√ÉO CALCULAR IMPORTA√á√ÉO -->
  <div class="card" style="text-align:center;">
    <button id="calcularBtn">Calcular custo de importa√ß√£o</button>
  </div>

  <!-- üîπ RESULTADO IMPORTA√á√ÉO -->
  <div class="card result" id="resultadoCard" style="display:none;">
    <h2>Resultado da Importa√ß√£o</h2>

    <div class="result-label">
      Valor dos produtos (BRL):
      <span class="result-value" id="resProdutos"></span>
    </div>
    <div class="result-label">
      Valor do frete + seguro (BRL):
      <span class="result-value" id="resFreteSeguro"></span>
    </div>
    <div class="result-label">
      Valor dos impostos (II + ICMS) (BRL):
      <span class="result-value" id="resImpostos"></span>
    </div>
    <div class="result-label">
      Taxa courier (m√≠n. 18,8 USD ou 2% da base) (BRL):
      <span class="result-value" id="resCourier"></span>
    </div>

    <hr>

    <div class="result-label">
      Custo total do lote:
      <span class="result-value" id="resultadoTotal"></span>
    </div>

    <div class="result-label">
      Custo unit√°rio do produto:
      <span class="result-value" id="resultadoUnitario"></span>
    </div>

    <p class="muted" id="resResumoBase"></p>
  </div>

  <!-- üîπ SIMULAR VIABILIDADE DE VENDA -->
  <div class="card" id="viabilidadeCard" style="display:none;">
    <h2>Simular Viabilidade de Venda</h2>
    <p class="muted">
      Preencha os campos em verde (como na planilha). O custo do produto j√° vem do c√°lculo de importa√ß√£o,
      mas voc√™ pode ajustar manualmente.
    </p>

    <div class="grid grid-2">
      <div>
        <label>Valor da venda (R$)</label>
        <input type="number" id="vVenda" step="0.01" value="19.90">
      </div>

      <div>
        <label>Tarifa fixa do marketplace (R$)</label>
        <input type="number" id="vTarifaFixa" step="0.01" value="6.00">
      </div>

      <div>
        <label>Tarifa an√∫ncio (%)</label>
        <input type="number" id="vTarifaAnuncioPercent" step="0.01" value="13.00">
      </div>

      <div>
        <label>Impostos sobre venda (%)</label>
        <input type="number" id="vImpostosPercent" step="0.01" value="4.00">
      </div>

      <div>
        <label>Embalagem (R$)</label>
        <input type="number" id="vEmbalagem" step="0.01" value="0.50">
      </div>

      <div>
        <label>Custo do produto (R$)</label>
        <input type="number" id="vCustoProduto" step="0.01">
      </div>
    </div>

    <div style="text-align:center;margin-top:14px;">
      <button id="btnCalcVenda" type="button">Calcular viabilidade de venda</button>
    </div>

    <div class="result" id="viabResultado" style="margin-top:14px; display:none;">
      <div class="result-label">
        Margem contribui√ß√£o (por unidade):
        <span class="result-value" id="viabMargem"></span>
      </div>
      <div class="result-label">
        Margem ROI:
        <span class="result-value" id="viabROI"></span>
      </div>
      <div class="result-label">
        Investimento √ó Retorno (lote):
        <span class="result-value" id="viabMontao"></span>
      </div>

      <div id="viabAlerta"></div>
    </div>
  </div>

  <!-- üîπ SOBRE F√ÅBIO MACHADO -->
  <div class="card">
    <h2>Sobre F√°bio Machado</h2>
    <p class="muted">
      Consultor e mentor especializado em importa√ß√£o, com foco em estruturar opera√ß√µes enxutas, seguras
      e lucrativas para profissionais e empresas que desejam importar com seguran√ßa.
    </p>
    <p class="muted">
      Ao longo dos √∫ltimos anos, ajudei alunos e clientes a entender de forma pr√°tica como funcionam
      classifica√ß√£o fiscal, tratamentos administrativos, tributa√ß√£o na importa√ß√£o e forma√ß√£o de pre√ßo
      para marketplaces.
    </p>
    <p class="muted">
      A calculadora que voc√™ est√° utilizando foi criada justamente para apoiar esse processo de tomada
      de decis√£o, trazendo clareza sobre custo real, riscos e margem l√≠quida.
    </p>
    <p class="muted">
      Acompanhe tamb√©m no Instagram:
      <a href="https://www.instagram.com/fabiomachado.br" target="_blank">@fabiomachado.br</a>
    </p>
  </div>

  <!-- üîπ BLOCO QUER SER MEU ALUNO -->
  <div class="card">
    <h2>Quer ser meu aluno?</h2>
    <p class="muted">
      Se voc√™ quer aprender a importar do zero, com m√©todo, seguran√ßa e acompanhamento,
      conhe√ßa meus programas de consultoria e mentoria em importa√ß√£o.
    </p>
    <p class="muted">
      Dentro da mentoria voc√™ ter√°:
    </p>
    <ul class="muted">
      <li>Passo a passo para an√°lise de NCM, tratamentos administrativos e riscos.</li>
      <li>Modelos pr√°ticos de forma√ß√£o de pre√ßo e c√°lculo de margem.</li>
      <li>Suporte para tirar d√∫vidas sobre opera√ß√µes reais.</li>
    </ul>
    <p class="muted">
      Clique no bot√£o abaixo para falar diretamente comigo no WhatsApp:
    </p>
    <div style="text-align:center; margin-top:10px;">
      <a href="https://wa.me/message/UDEZKZS4LQWXB1" target="_blank">
        <button type="button">Quero saber mais sobre a mentoria</button>
      </a>
    </div>
  </div>
</main>

<footer>
  <p style="margin:4px 0; opacity:0.9;">
    Desenvolvido por <strong>F√°bio Machado Consultoria &amp; Mentoria em Importa√ß√£o</strong>
  </p>

  <p style="margin:6px 0 8px;">
    Quer aprender a importar da maneira correta, evitando erros e preju√≠zos?<br>
    <a href="https://wa.me/message/UDEZKZS4LQWXB1" target="_blank">
      Fale conosco pelo WhatsApp üì≤ (12) 99184-4541
    </a>
  </p>

  <p style="margin:4px 0; font-size:12px; opacity:0.6;">
    Este simulador √© para fins educacionais ‚Äî atualize sempre as al√≠quotas e par√¢metros conforme sua opera√ß√£o.
  </p>

  <p style="margin:4px 0; font-size:12px; opacity:0.6;">
    Instagram: <a href="https://www.instagram.com/fabiomachado.br" target="_blank">@fabiomachado.br</a>
  </p>
</footer>

<!-- Bot√£o flutuante WhatsApp -->
<a href="https://wa.me/message/UDEZKZS4LQWXB1"
   class="whatsapp-float"
   target="_blank"
   aria-label="Falar com F√°bio Machado no WhatsApp">
  üí¨
</a>

<script>
  /* ================================
       1) COTA√á√ÉO AUTOM√ÅTICA
  =================================*/
  const cotacaoTexto = document.getElementById("cotacaoInfo");
  const cotacaoInput = document.getElementById("cotacao");
  const cotacaoAuto = document.getElementById("cotacaoAuto");

  async function buscarCotacao() {
    try {
      cotacaoTexto.textContent = "Cota√ß√£o: carregando...";
      const res = await fetch("https://economia.awesomeapi.com.br/json/last/USD-BRL");
      const data = await res.json();
      const rate = parseFloat(data.USDBRL.bid);
      if (!isNaN(rate)) {
        cotacaoInput.value = rate.toFixed(4);
        cotacaoTexto.textContent = "Cota√ß√£o: R$ " + rate.toFixed(4);
      } else {
        cotacaoTexto.textContent = "Cota√ß√£o: erro";
      }
    } catch (e) {
      cotacaoTexto.textContent = "Cota√ß√£o: erro";
    }
  }

  buscarCotacao();
  setInterval(buscarCotacao, 60000);

  cotacaoAuto.addEventListener("change", () => {
    cotacaoInput.disabled = cotacaoAuto.checked;
    if (cotacaoAuto.checked) buscarCotacao();
  });

  /* ================================
       2) NCM ALERTAS + OBSERVA√á√ïES
  =================================*/
  const ncmSimplificada = document.getElementById("ncmSimplificada");
  const ncmCide = document.getElementById("ncmCide");
  const ncmAntidumping = document.getElementById("ncmAntidumping");
  const ncmComp = document.getElementById("ncmComp");
  const ncmAlerta =
